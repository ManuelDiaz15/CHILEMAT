{% extends 'core/base.html' %}

{% load static %}

{% block title %}Historial Compra{% endblock %}

{% block content %}
<section class="page-section cta">
    <div class="container">
        <div class="row">
            <div class="col-xl-12">
                <table class="text-center" style="padding: 1rem; margin: 0.5rem;">
                    <tr>
                        <td>
                            <h1>EDITAR VENTA</h1>
                        </td>
                    </tr>
                </table>

                <div class="cta-inner1 text-center rounded">
                    <h6 class="section-heading mb-4">
                        <span class="section-heading-upper">Importante</span>
                        <p class="mb-0">Los campos "Código de Venta", "cliente" y "fecha de compra" están vinculados,
                            por lo tanto, no se pueden editar.</p>
                    </h6>
                </div>
                <div class="container">
                    <form method="POST" class="form">
                        {% csrf_token %}
                        <div class="row">
                            <div class="col-xs-6">
                                <div class="form-group">
                                    <label for="{{ form.codigo_venta.id_for_label }}">Código de Venta</label>
                                    <input type="text" id="{{ form.codigo_venta.id_for_label }}"
                                        name="{{ form.codigo_venta.html_name }}" value="{{ form.codigo_venta.value }}"
                                        readonly>
                                </div>
                            </div>
                            <div class="col-xs-6">
                                <div class="form-group">
                                    <label for="{{ form.cliente.id_for_label }}">Cliente</label>
                                    {{ form.cliente }}
                                </div>
                            </div>
                            <div class="col-xs-6">
                                <div class="form-group">
                                    <label for="{{ form.fecha_compra.id_for_label }}">Fecha de Compra</label>
                                    {{ form.fecha_compra }}
                                </div>
                            </div>
                        </div>
                        {{ formset.management_form }}
                        <div class="row">
                            {% for form in formset.forms %}
                            <div class="col-xs-12 col-md-6">
                                <div class="form-group">
                                    <div class="table-responsive">
                                        <table class="table">
                                            {{ form.as_table }}
                                        </table>

                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                        <button type="submit" class="btn btn-secondary btn-lg btn-block">Guardar cambios</button>
                    </form>
                </div>

            </div>
        </div>
    </div>
</section>
<style>
    .cta-inner1 {
        position: relative;
        margin: 2%;
        background-color: rgba(215, 247, 140, 0.85);
    }
</style>
<script>
    var clienteField = document.getElementById("id_cliente");
    clienteField.readOnly = true;
    clienteField.style.pointerEvents = "none";
</script>
<script>
    document.getElementById("id_fecha_compra").readOnly = true;
</script>
<script>
    // seleccionar el div que deseas ocultar
    const div = document.querySelector('.cta-inner1');

    // programar la ocultación después de 10 segundos
    setTimeout(function () {
        div.style.display = 'none';
    }, 10000);
</script>




{% endblock %}